(()=>{(function(){let i="featured_random_html_v1",d="featured_random_time_v1";function l(t){let e=document.getElementById(t);if(!e)return[];try{return JSON.parse(e.textContent||"[]")}catch{return[]}}function u(t,e){if(!Array.isArray(t))return[];if(t.length<=e)return t.slice();for(let a=0;a<e;a++){let r=a+Math.floor(Math.random()*(t.length-a));[t[a],t[r]]=[t[r],t[a]]}return t.slice(0,e)}function n(t){let e=document.createElement("div");return e.textContent=t||"",e.innerHTML}function m(t){return t?t.avatar&&t.avatar.trim()?`<img class="author-thumb" src="${n(t.avatar)}" alt="${n(t.display_name||"")}">`:t.gravatar&&t.gravatar.trim()?`<img class="author-thumb" src="https://www.gravatar.com/avatar/${n(t.gravatar)}?s=250&d=mm&r=x" alt="${n(t.display_name||"")}">`:"":""}function g(){return'<div class="mb-2 mt-2 font-weight-normal"><span class="badge">\u7CBE\u9009</span></div>'}function f(t,e){return t.image?String(e).toLowerCase()==="enabled"?`
        <img class="featured-box-img-cover lazyimg"
             src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII="
             data-src="${n(t.image)}" alt="${n(t.title)}">
      `:`<img class="featured-box-img-cover" src="${n(t.image)}" alt="${n(t.title)}">`:""}function h(t,e){let a=t.rating?g():"",r=m(t.author),s=t.author&&t.author.display_name?n(t.author.display_name):"",o=t.author&&t.author.web?n(t.author.web):"",p=s?o?`<span class="post-name"><a target="_blank" href="${o}">${s}</a></span><br/>`:`<span class="post-name">${s}</span><br/>`:"",y=f(t,e);return`
<!-- begin post -->
<div class="col-md-6 mb-30px">
  <div class="listfeaturedtag h-100">
    <div class="row h-100">
      <div class="col-12 col-md-12 col-lg-5 pr-lg-0">
        <div class="h-100">
          <div class="wrapthumbnail">
            <a href="${n(t.url)}">${y}</a>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-12 col-lg-7">
        <div class="h-100 card-group">
          <div class="card">
            <div class="card-body">
              <h2 class="card-title">
                <a class="text-dark" href="${n(t.url)}">${n(t.title)}</a>
                ${a}
              </h2>
              <h4 class="card-text">${n(t.content_excerpt||"")}</h4>
            </div>
            <div class="card-footer b-0 bg-white mt-auto">
              <div class="wrapfooter">
                ${s?`
                  <span class="meta-footer-thumb">${r}</span>
                  <span class="author-meta">
                    ${p}
                `:""}
                <span class="post-date">${n(t.date_to_string||"")}</span>
                ${s?"</span>":""}
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end post -->
`}function v(t,e){let a=document.getElementById("featured-random-mount");a&&(a.innerHTML=t.map(r=>h(r,e)).join(""))}function A(){let t=document.getElementById("featured-random-mount");if(!t)return!1;let e=sessionStorage.getItem(i);return e?(t.innerHTML=e,!0):!1}function b(t){sessionStorage.setItem(i,t),sessionStorage.setItem(d,String(Date.now()))}function $(t){t.preventDefault();let e=l("featured-posts-data"),a=document.getElementById("featured-random-mount");if(!a||!e||e.length<3)return;let r=parseInt(a.getAttribute("data-limit")||"2",10),s=a.getAttribute("data-lazy")||"",o=u(e.slice(),r);v(o,s),b(a.innerHTML)}function c(){A();let t=document.getElementById("refresh-featured");t&&t.addEventListener("click",$,!1)}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c()})();})();
