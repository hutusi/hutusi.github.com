(()=>{(function(){function d(t){let a=document.getElementById(t);if(!a)return[];try{return JSON.parse(a.textContent||"[]")}catch{return[]}}function u(t,a){if(!Array.isArray(t))return[];if(t.length<=a)return t.slice();for(let e=0;e<a;e++){let s=e+Math.floor(Math.random()*(t.length-e));[t[e],t[s]]=[t[s],t[e]]}return t.slice(0,a)}function r(t){let a=document.createElement("div");return a.textContent=t||"",a.innerHTML}function m(t){return t?t.avatar&&t.avatar.trim()?`<img class="author-thumb" src="${r(t.avatar)}" alt="${r(t.display_name||"")}">`:t.gravatar&&t.gravatar.trim()?`<img class="author-thumb" src="https://www.gravatar.com/avatar/${r(t.gravatar)}?s=250&d=mm&r=x" alt="${r(t.display_name||"")}">`:"":""}function g(){return`
      <div class="mb-2 mt-2 font-weight-normal">
        <span class="badge">\u7CBE\u9009</span>
      </div>
    `}function f(t,a){return t.image?String(a).toLowerCase()==="enabled"?`
        <img class="featured-box-img-cover lazyimg"
             src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAQAAAA3fa6RAAAADklEQVR42mNkAANGCAUAACMAA2w/AMgAAAAASUVORK5CYII="
             data-src="${r(t.image)}" alt="${r(t.title)}">
      `:`<img class="featured-box-img-cover" src="${r(t.image)}" alt="${r(t.title)}">`:""}function h(t,a){let e=t.rating?g():"",s=m(t.author),i=t.author&&t.author.display_name?r(t.author.display_name):"",o=t.author&&t.author.web?r(t.author.web):"",n=i?o?`<span class="post-name"><a target="_blank" href="${o}">${i}</a></span><br/>`:`<span class="post-name">${i}</span><br/>`:"",v=f(t,a);return`
<!-- begin post -->
<div class="col-md-6 mb-30px">
  <div class="listfeaturedtag h-100">
    <div class="row h-100">
      <div class="col-12 col-md-12 col-lg-5 pr-lg-0">
        <div class="h-100">
          <div class="wrapthumbnail">
            <a href="${r(t.url)}">${v}</a>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-12 col-lg-7">
        <div class="h-100 card-group">
          <div class="card">
            <div class="card-body">
              <h2 class="card-title">
                <a class="text-dark" href="${r(t.url)}">${r(t.title)}</a>
                ${e}
              </h2>
              <h4 class="card-text">${r(t.content_excerpt||"")}</h4>
            </div>
            <div class="card-footer b-0 bg-white mt-auto">
              <div class="wrapfooter">
                ${i?`
                  <span class="meta-footer-thumb">${s}</span>
                  <span class="author-meta">
                    ${n}
                `:""}
                <span class="post-date">${r(t.date_to_string||"")}</span>
                ${i?"</span>":""}
                <div class="clearfix"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- end post -->
`}function l(t){return`featured_random_posts:${location.pathname}:n=${t}`}function c(t=!0){let a=document.getElementById("featured-random-mount");if(!a)return;let e=parseInt(a.getAttribute("data-limit")||"2",10),s=a.getAttribute("data-lazy")||"",i=l(e),o=[];if(t)try{let n=JSON.parse(sessionStorage.getItem(i)||"null");Array.isArray(n)&&n.length===e&&(o=n)}catch{}if(o.length===0){let n=d("featured-posts-data");if(!n||n.length<e)return;o=u(n.slice(),e),sessionStorage.setItem(i,JSON.stringify(o))}a.innerHTML=o.map(n=>h(n,s)).join("")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",function(){c(!0)}):c(!0),document.addEventListener("click",function(t){if(!t.target.closest("#featured-refresh"))return;let e=document.getElementById("featured-random-mount");if(!e)return;let s=parseInt(e.getAttribute("data-limit")||"2",10);sessionStorage.removeItem(l(s)),c(!1)})})();})();
